webpackJsonp([1],{"+p1m":function(e,t){},DLz9:function(e,t){},"J+MR":function(e,t){},MPzD:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("7+uW"),a=(s("MPzD"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]});var n=s("VU/8")({name:"app"},a,!1,function(e){s("S8lG")},null,null).exports,r=s("/ocq"),o=s("JnRc"),u=s.n(o);u.a.init({appId:"k2S0DOhYMPe2ha4LlBaCKnvI-gzGzoHsz",appKey:"wnKB98C7yyTA46YOGi3l4dtE"});var l=u.a,c={202:"用户名已被占用",210:"用户名和密码不匹配",211:"找不到该用户",217:"无效的用户名",unknow:"请求失败，请稍后再试"},m=function(e){var t=e.code;return c[t]||c.unknow},d=function(e){var t=e||l.User.current()||{attributes:{}},s=t.id,i=t.attributes.username;return{id:s||"",username:i||""}},v=s("Dd8w"),f=s.n(v),p=s("mvHQ"),_=s.n(p),h=s("woOf"),g=s.n(h),C=s("NYxO"),b=s("SeUI"),w=s.n(b);i.a.use(C.a);var k=new i.a,y=new C.a.Store({state:{selected:"Profile",user:{id:"",username:""},resumeConfig:[{field:"Profile",icon:"id",keys:["name","intention","sex","age","assessment"]},{field:"Work",icon:"work",type:"array",keys:["company","time","details"]},{field:"Education",icon:"edu",keys:["degree","English"]},{field:"Projects",icon:"project",type:"array",keys:["project","technology","details"]},{field:"Hobbys",icon:"hobby",type:"array",keys:["hobby"]},{field:"Contacts",icon:"contact",keys:["telephone","email","github","blog","twitter"]},{field:"Skills",icon:"skill",type:"array",keys:["skill","content"]}],resume:{id:""}},mutations:{initState:function(e,t){e.resumeConfig.map(function(t){if("array"===t.type){i.a.set(e.resume,t.field,[]);e.resume[t.field].push({}),t.keys.map(function(s){i.a.set(e.resume[t.field][0],s,"")})}else k.$set(e.resume,t.field,{}),t.keys.map(function(s){i.a.set(e.resume[t.field],s,"")})}),t&&g()(e,t)},switchTab:function(e,t){e.selected=t,localStorage.setItem("state",_()(e))},updateResume:function(e,t){var s=t.path,i=t.value;w.a.set(e.resume,s,i),localStorage.setItem("resume",_()(e.resume))},setUser:function(e,t){g()(e.user,t)},removeUser:function(e){e.user.id="",e.user.username="",e.resume.id=""},setResume:function(e,t){e.resumeConfig.map(function(s){if("array"===s.type)for(var a=function(a,n){t[s.field].length>0&&i.a.set(e.resume[s.field],a,{}),s.keys.map(function(n){i.a.set(e.resume[s.field][a],n,t[s.field][a][n])})},n=0,r=t[s.field].length;n<r;n++)a(n);else s.keys.map(function(a){i.a.set(e.resume[s.field],a,t[s.field][a])})}),e.resume.id=t.id},setResumeId:function(e,t){var s=t.id;e.resume.id=s},addResumeSubField:function(e,t){var s={};e.resume[t].push(s),e.resumeConfig.filter(function(e){return e.field===t})[0].keys.map(function(e){i.a.set(s,e,"")}),localStorage.setItem("state",_()(e))},removeResumeSubField:function(e,t){var s=t.field,i=t.index;e.resume[s].splice(i,1),localStorage.setItem("state",_()(e))}},actions:{saveResume:function(e,t){var s=e.state,i=e.commit;localStorage.setItem("state",_()(s));var a=new(l.Object.extend("Resume"));console.log(s.resume),s.resume.id&&(a.id=s.resume.id);var n=d().id;a.set("Profile",s.resume.Profile),a.set("Work",s.resume.Work),a.set("Education",s.resume.Education),a.set("Projects",s.resume.Projects),a.set("Hobbys",s.resume.Hobbys),a.set("Contacts",s.resume.Contacts),a.set("Skills",s.resume.Skills),a.set("owner_id",n);var r=new l.ACL;r.setPublicReadAccess(!0),r.setWriteAccess(l.User.current(),!0),a.setACL(r),a.save().then(function(e){s.resume.id||i("setResumeId",{id:e.id})}).catch(function(e){console.log(e)})},fetchResume:function(e,t){var s=e.commit,i=new l.Query("Resume");i.equalTo("owner_id",d().id),i.descending("updatedAt"),i.first().then(function(e){e&&s("setResume",f()({id:e.id},e.attributes))})}}}),R={name:"loginForm",store:y,data:function(){return{formData:{username:"",password:""},errorMessage:""}},methods:{login:function(){var e=this,t=this.formData,s=t.username,i=t.password;l.User.logIn(s,i).then(function(){var t=d();e.$store.commit("setUser",t),e.$router.replace("/main")},function(t){e.errorMessage=m(t)})}}},P={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("form",{on:{submit:function(t){t.preventDefault(),e.login(t)}}},[s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.username,expression:"formData.username"}],attrs:{type:"text",required:"",placeholder:"用户名"},domProps:{value:e.formData.username},on:{input:function(t){t.target.composing||e.$set(e.formData,"username",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.password,expression:"formData.password"}],attrs:{type:"password",required:"",placeholder:"密码"},domProps:{value:e.formData.password},on:{input:function(t){t.target.composing||e.$set(e.formData,"password",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"actions"},[s("span",[e._v(e._s(e.errorMessage))]),e._v(" "),s("input",{attrs:{type:"submit",value:"登录"}}),e._v(" "),e._t("default")],2)])])},staticRenderFns:[]};var U={name:"signUpForm",data:function(){return{formData:{username:"",passage:"",email:""},errorMessage:""}},methods:{signUp:function(){var e=this,t=this.formData,s=t.username,i=t.password,a=t.email,n=new l.User;n.setUsername(s),n.setPassword(i),n.setEmail(a),n.signUp().then(function(t){e.$router.replace("/main")},function(t){e.errorMessage=m(t)})}}},x={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("form",{on:{submit:function(t){t.preventDefault(),e.signUp(t)}}},[s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.username,expression:"formData.username"}],attrs:{type:"text",required:"",placeholder:"用户名"},domProps:{value:e.formData.username},on:{input:function(t){t.target.composing||e.$set(e.formData,"username",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.password,expression:"formData.password"}],attrs:{type:"password",required:"",placeholder:"密码"},domProps:{value:e.formData.password},on:{input:function(t){t.target.composing||e.$set(e.formData,"password",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.email,expression:"formData.email"}],attrs:{type:"email",required:"",placeholder:"邮箱"},domProps:{value:e.formData.email},on:{input:function(t){t.target.composing||e.$set(e.formData,"email",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"actions"},[s("span",[e._v(e._s(e.errorMessage))]),e._v(" "),e._t("default"),e._v(" "),s("input",{attrs:{type:"submit",value:"注册"}})],2)])])},staticRenderFns:[]};var E={name:"login",data:function(){return{hasUser:!0}},methods:{signUp:function(){this.hasUser=!1},cancel:function(){this.hasUser=!0}},components:{loginForm:s("VU/8")(R,P,!1,function(e){s("RvUI")},"data-v-695be35e",null).exports,signUpForm:s("VU/8")(U,x,!1,function(e){s("rcCJ")},"data-v-f82a3a7e",null).exports}},$={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-wrap"},[t("p",{staticClass:"test"},[this._v("测试用帐号密码分别为admin,admin")]),this._v(" "),t("div",{staticClass:"login"},[t("h2",[this._v("Vue简历编辑器")]),this._v(" "),this.hasUser?t("div",[t("login-form",[t("input",{attrs:{type:"button",value:"注册"},on:{click:this.signUp}})])],1):t("div",[t("sign-up-form",[t("input",{attrs:{type:"button",value:"取消"},on:{click:this.cancel}})])],1)])])},staticRenderFns:[]};var D=s("VU/8")(E,$,!1,function(e){s("J+MR")},"data-v-9749f432",null).exports,S={name:"TopBar",store:y,methods:f()({logout:function(){l.User.logOut(),this.removeUser(),this.$router.replace("/")},preview:function(){this.saveResume(),this.$router.replace("/preview")}},Object(C.c)(["removeUser"]),Object(C.b)(["saveResume"])),computed:f()({},Object(C.d)(["user"]))},F={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"top-bar"},[e._m(0),e._v(" "),s("div",{staticClass:"options"},[s("span",{staticClass:"welcome"},[e._v("你好:"+e._s(e.user.username))]),e._v(" "),s("input",{staticClass:"minor",attrs:{type:"button",value:" 登出"},on:{click:e.logout}}),e._v(" "),s("input",{staticClass:"primary",attrs:{type:"button",value:"保存"},on:{click:e.saveResume}}),e._v(" "),s("input",{staticClass:"primary",attrs:{type:"button",value:"预览"},on:{click:e.preview}})])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logo"},[t("span",[this._v("Vue简历编辑器")])])}]};var I=s("VU/8")(S,F,!1,function(e){s("DLz9")},"data-v-299f2b48",null).exports,j={name:"ResumePreview",store:y,computed:f()({},Object(C.d)(["resume"]))},M={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"resume-preview"}},[s("section",{staticClass:"section-left"},[s("header",{staticClass:"profile"},[s("h2",[e._v(e._s(e.resume.Profile.name))]),e._v(" "),s("h3",[e._v("应聘岗位:"+e._s(e.resume.Profile.intention))])]),e._v(" "),s("div",{staticClass:"contacts"},[s("h3",[e._v("Contact. 联系方式")]),e._v(" "),s("p",{staticClass:"mobilephone"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-telephone"}})]),e._v(" "),s("i",[e._v("手机号:")]),e._v("\n        "+e._s(e.resume.Contacts.telephone)+"\n      ")]),e._v(" "),s("p",{staticClass:"mail"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-email"}})]),e._v(" "),s("i",[e._v("邮 箱：")]),e._v(" "),s("a",{attrs:{href:"mailto:zoulong2008@126.com",target:"_blank"}},[e._v(e._s(e.resume.Contacts.email))])]),e._v(" "),s("p",{staticClass:"twitter"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-twitter"}})]),e._v(" "),s("i",[e._v("推特：")]),e._v("\n        "+e._s(e.resume.Contacts.twitter)+"\n      ")])]),e._v(" "),s("div",{staticClass:"info"},[s("h3",[e._v("Basic info. 基本信息")]),e._v(" "),s("ul",[s("li",[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-id"}})]),e._v("\n          个人信息："+e._s(e.resume.Profile.name)+"/"+e._s(e.resume.Profile.sex)+"/"+e._s(e.resume.Profile.age)+"\n        ")]),e._v(" "),s("li",[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-edu"}})]),e._v("\n          学位等级："+e._s(e.resume.Education.degree)+"\n        ")]),e._v(" "),s("li",[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-English"}})]),e._v("\n          英语水平："+e._s(e.resume.Education.English)+"\n        ")]),e._v(" "),s("li",[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-github"}})]),e._v("\n          github："+e._s(e.resume.Contacts.github)+"\n        ")]),e._v(" "),s("li",[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-blog"}})]),e._v("\n          blog："+e._s(e.resume.Contacts.blog)+"\n        ")])])]),e._v(" "),s("div",{staticClass:"skills"},[s("h3",[e._v("Tech. 技能点")]),e._v(" "),e._l(e.resume.Skills,function(t,i){return s("ul",{staticClass:"skillpoint"},[s("li",{staticClass:"item-skill"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-js"}})]),e._v("\n            "+e._s(t.skill)+"\n          ")])])})],2),e._v(" "),s("div",{staticClass:"hobbies"},[s("h3",[e._v("兴趣爱好")]),e._v(" "),s("ul",{staticClass:"hobby-item"},e._l(e.resume.Hobbys,function(t,i){return s("li",{key:i},[e._v(e._s(t.hobby))])}))]),e._v(" "),s("div",{staticClass:"self-assessment"},[s("h3",[e._v("自我评价")]),e._v(" "),s("p",[e._v("\n        "+e._s(e.resume.Profile.assessment)+"\n      ")])])]),e._v(" "),s("section",{staticClass:"section-right"},[e._m(0),e._v(" "),s("div",{staticClass:"project"},[e._m(1),e._v(" "),e._l(e.resume.Projects,function(t,i){return s("div",{key:i,staticClass:"project-item"},[s("ul",[s("li",{staticClass:"item-title"},[s("span",[e._v(e._s(t.project))]),e._v(" "),s("span",[e._v(e._s(t.technology))])]),e._v(" "),s("li",{staticClass:"content"},[e._v(e._s(t.details))])])])})],2),e._v(" "),s("div",{staticClass:"work"},[e._m(2),e._v(" "),e._l(e.resume.Work,function(t,i){return s("div",{key:i,staticClass:"work-item"},[s("ul",[s("li",{staticClass:"item-title"},[s("span",[e._v(e._s(t.company))]),e._v(" "),s("span",[e._v(e._s(t.time))])]),e._v(" "),s("li",{staticClass:"content"},[e._v(e._s(t.details))])])])})],2),e._v(" "),s("div",{staticClass:"skill"},[e._m(3),e._v(" "),e._l(e.resume.Skills,function(t,i){return s("div",{key:i,staticClass:"skill-item"},[s("ul",[s("li",{staticClass:"item-title"},[s("span",[e._v(e._s(t.skill))])]),e._v(" "),s("li",{staticClass:"content"},[e._v(e._s(t.content))])])])})],2)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pro-head"},[t("h3",[this._v("Experience. 项目与工作经验")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("h3",[this._v("项目经验")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("h3",[this._v("工作经验")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("h3",[this._v("技能")])])}]};var O=s("VU/8")(j,M,!1,function(e){s("mUEt")},"data-v-535f5274",null).exports,N={name:"ResumeEditor",store:y,computed:f()({},Object(C.d)(["resume","resumeConfig"]),{selected:{get:function(){return this.$store.state.selected},set:function(e){return this.$store.commit("switchTab",e)}}}),methods:f()({removeResumeSubField:function(e,t){this.$store.commit("removeResumeSubField",{field:e,index:t})}},Object(C.c)(["addResumeSubField"]),{changeResumePanels:function(e,t){this.$store.commit("updateResume",{path:e,value:t})}})},V={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"resume-editor"}},[s("nav",[s("ol",e._l(e.resumeConfig,function(t,i){return s("li",{key:i,class:{active:t.field===e.selected},on:{click:function(s){e.selected=t.field}}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-"+t.icon}})]),e._v("\n        "+e._s(t.field)+"\n      ")])}))]),e._v(" "),s("ol",{staticClass:"panels"},e._l(e.resumeConfig,function(t,i){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.field===e.selected,expression:"item.field===selected"}],key:i},["array"===t.type?s("div",{staticClass:"array-item"},[e._l(e.resume[t.field],function(i,a){return s("div",{key:a,staticClass:"subitem"},[s("button",{staticClass:"remove-btn",on:{click:function(s){e.removeResumeSubField(t.field,a)}}},[e._v("X")]),e._v(" "),e._l(i,function(i,n){return s("div",{key:n,staticClass:"resumePanels"},[s("label",[e._v(e._s(""+n))]),e._v(" "),s("input",{attrs:{type:"text"},domProps:{value:i},on:{input:function(s){e.changeResumePanels(t.field+"."+a+"."+n,s.target.value)}}})])})],2)}),e._v(" "),s("button",{staticClass:"add-btn",on:{click:function(s){e.addResumeSubField(t.field)}}},[e._v("增加")])],2):e._l(e.resume[t.field],function(i,a){return s("div",{key:a,staticClass:"resumePanels"},[s("label",[e._v(e._s(a))]),e._v(" "),s("input",{attrs:{type:"text"},domProps:{value:i},on:{input:function(s){e.changeResumePanels(t.field+"."+a,s.target.value)}}})])})],2)}))])},staticRenderFns:[]};var z={name:"Main",store:y,components:{TopBar:I,ResumeEditor:s("VU/8")(N,V,!1,function(e){s("+p1m")},"data-v-6debd376",null).exports,ResumePreview:O},created:function(){this.$store.commit("initState");var e=d();this.$store.commit("setUser",e),e.id?this.$store.dispatch("fetchResume").then(function(){}):this.restoreResumeFromLocalStorage()},methods:{restoreResumeFromLocalStorage:function(){var e=localStorage.getItem("state");e&&this.$store.commit("setResume",JSON.parse(e))}}},H={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"main-page"},[t("header",[t("top-bar")],1),this._v(" "),t("main",[t("resume-editor"),this._v(" "),t("resume-preview")],1)])},staticRenderFns:[]};var J=s("VU/8")(z,H,!1,function(e){s("eIu5")},"data-v-77ed8a4d",null).exports,L=s("l9mu"),A=s.n(L),T=s("2Pnh"),q=s.n(T),W=s("7t+N"),G=s.n(W),B={name:"preview",components:{ResumePreview:O},methods:{goback:function(){this.$router.replace("/main")},downPdf:function(){var e=G()("#resume-preview"),t=e[0],s=t.offsetWidth,i=t.offsetHeight,a=document.createElement("canvas");a.width=2*s,a.height=2*i;var n={scale:2,canvas:a,logging:!0,width:s,height:i};q()(e[0],n).then(function(e){var t=e.getContext("2d");t.mozImageSmoothingEnabled=!1,t.webkitImageSmoothingEnabled=!1,t.msImageSmoothingEnabled=!1,t.imageSmoothingEnabled=!1;var s=e.width,i=e.height,a=s/595.28*841.89,n=i,r=0,o=595.28/s*i,u=e.toDataURL("image/jpeg",1),l=new A.a("","pt","a4");if(n<a)l.addImage(u,"JPEG",0,0,595.28,o);else for(;n>0;)l.addImage(u,"JPEG",0,r,595.28,o),r-=841.89,(n-=a)>0&&l.addPage();l.save("resume.pdf")})}}},K={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"preview"},[t("ResumePreview"),this._v(" "),t("div",{staticClass:"goback",on:{click:this.goback}},[this._v("返回")]),this._v(" "),t("div",{staticClass:"download",on:{click:this.downPdf}},[this._v("下载")])],1)},staticRenderFns:[]};var Y=s("VU/8")(B,K,!1,function(e){s("e4ZR")},"data-v-3c3d0b44",null).exports;i.a.use(r.a);var Q=new r.a({routes:[{path:"/",name:"Login",component:D},{path:"/main",name:"Main",component:J},{path:"/preview",name:"Preview",component:Y}]});i.a.config.productionTip=!1,new i.a({el:"#app",router:Q,template:"<App/>",components:{App:n}})},RvUI:function(e,t){},S8lG:function(e,t){},e4ZR:function(e,t){},eIu5:function(e,t){},mUEt:function(e,t){},rcCJ:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.306d97e685e4ea16f2a3.js.map
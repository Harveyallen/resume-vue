webpackJsonp([1],{Apkt:function(e,t){},"J+MR":function(e,t){},MPzD:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("7+uW"),i=(s("MPzD"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]});var r=s("VU/8")({name:"app"},i,!1,function(e){s("S8lG")},null,null).exports,n=s("/ocq"),o=s("JnRc"),u=s.n(o);u.a.init({appId:"k2S0DOhYMPe2ha4LlBaCKnvI-gzGzoHsz",appKey:"wnKB98C7yyTA46YOGi3l4dtE"});var c=u.a,l={202:"用户名已被占用",210:"用户名和密码不匹配",211:"找不到该用户",217:"无效的用户名",unknow:"请求失败，请稍后再试"},m=function(e){var t=e.code;return l[t]||l.unknow},v=function(e){var t=e||c.User.current()||{attributes:{}},s=t.id,a=t.attributes.username;return{id:s||"",username:a||""}},d=s("Dd8w"),p=s.n(d),f=s("mvHQ"),_=s.n(f),h=s("woOf"),g=s.n(h),C=s("NYxO"),b=s("SeUI"),w=s.n(b);a.a.use(C.a);var y=new C.a.Store({state:{selected:"Profile",user:{id:"",username:""},resumeConfig:[{field:"Profile",icon:"id",keys:["name","city","intention","sex","age","assessment"]},{field:"Work",icon:"work",type:"array",keys:["company","time","details"]},{field:"Education",icon:"edu",keys:["school","time"]},{field:"Projects",icon:"project",type:"array",keys:["project","time","details"]},{field:"Hobbys",icon:"hobby",type:"array",keys:["hobby"]},{field:"Contacts",icon:"contact",keys:["telephone","email","github","blog"]},{field:"Skills",icon:"skill",type:"array",keys:["skill","content"]}],resume:{id:""}},mutations:{initState:function(e,t){e.resumeConfig.map(function(t){"array"===t.type?a.a.set(e.resume,t.field,[]):(a.a.set(e.resume,t.field,{}),t.keys.map(function(s){a.a.set(e.resume[t.field],s,"")}))}),t&&g()(e,t)},switchTab:function(e,t){e.selected=t},updateResume:function(e,t){var s=t.path,a=t.value;w.a.set(e.resume,s,a),localStorage.setItem("resume",_()(e.resume))},setUser:function(e,t){g()(e.user,t)},removeUser:function(e){e.user.id="",e.user.username="",e.resume.id=""},setResume:function(e,t){e.resumeConfig.map(function(s){var i=s.field;a.a.set(e.resume,i,t[i])}),e.resume.id=t.id},setResumeId:function(e,t){var s=t.id;e.resume.id=s},addResumeSubField:function(e,t){var s={};e.resume[t].push(s),e.resumeConfig.filter(function(e){return e.field===t})[0].keys.map(function(e){a.a.set(s,e,"")})},removeResumeSubField:function(e,t){var s=t.field,a=t.index;e.resume[s].splice(a,1)}},actions:{saveResume:function(e,t){var s=e.state,a=e.commit,i=new(c.Object.extend("Resume"));s.resume.id&&(i.id=s.resume.id);var r=v().id;i.set("Profile",s.resume.Profile),i.set("Work",s.resume.Work),i.set("Education",s.resume.Education),i.set("Projects",s.resume.Projects),i.set("Hobbys",s.resume.Hobbys),i.set("Contacts",s.resume.Contacts),i.set("Skills",s.resume.Skills),i.set("owner_id",r);var n=new c.ACL;n.setPublicReadAccess(!0),n.setWriteAccess(c.User.current(),!0),i.setACL(n),i.save().then(function(e){s.resume.id||a("setResumeId",{id:e.id})}).catch(function(e){console.log(e)})},fetchResume:function(e,t){var s=e.commit,a=new c.Query("Resume");a.equalTo("owner_id",v().id),a.first().then(function(e){e&&s("setResume",p()({id:e.id},e.attributes))})}}}),k={name:"loginForm",store:y,data:function(){return{formData:{username:"",password:""},errorMessage:""}},methods:{login:function(){var e=this,t=this.formData,s=t.username,a=t.password;c.User.logIn(s,a).then(function(){var t=v();e.$store.commit("setUser",t),e.$router.replace("/main")},function(t){e.errorMessage=m(t)})}}},R={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("form",{on:{submit:function(t){t.preventDefault(),e.login(t)}}},[s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.username,expression:"formData.username"}],attrs:{type:"text",required:"",placeholder:"用户名"},domProps:{value:e.formData.username},on:{input:function(t){t.target.composing||e.$set(e.formData,"username",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.password,expression:"formData.password"}],attrs:{type:"password",required:"",placeholder:"密码"},domProps:{value:e.formData.password},on:{input:function(t){t.target.composing||e.$set(e.formData,"password",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"actions"},[s("span",[e._v(e._s(e.errorMessage))]),e._v(" "),s("input",{attrs:{type:"submit",value:"登录"}}),e._v(" "),e._t("default")],2)])])},staticRenderFns:[]};var P={name:"signUpForm",data:function(){return{formData:{username:"",passage:"",email:""},errorMessage:""}},methods:{signUp:function(){var e=this,t=this.formData,s=t.username,a=t.password,i=t.email,r=new c.User;r.setUsername(s),r.setPassword(a),r.setEmail(i),r.signUp().then(function(t){e.$router.replace("/main")},function(t){e.errorMessage=m(t)})}}},U={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("form",{on:{submit:function(t){t.preventDefault(),e.signUp(t)}}},[s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.username,expression:"formData.username"}],attrs:{type:"text",required:"",placeholder:"用户名"},domProps:{value:e.formData.username},on:{input:function(t){t.target.composing||e.$set(e.formData,"username",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.password,expression:"formData.password"}],attrs:{type:"password",required:"",placeholder:"密码"},domProps:{value:e.formData.password},on:{input:function(t){t.target.composing||e.$set(e.formData,"password",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.email,expression:"formData.email"}],attrs:{type:"email",required:"",placeholder:"邮箱"},domProps:{value:e.formData.email},on:{input:function(t){t.target.composing||e.$set(e.formData,"email",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"actions"},[s("span",[e._v(e._s(e.errorMessage))]),e._v(" "),e._t("default"),e._v(" "),s("input",{attrs:{type:"submit",value:"注册"}})],2)])])},staticRenderFns:[]};var x={name:"login",data:function(){return{hasUser:!0}},methods:{signUp:function(){this.hasUser=!1},cancel:function(){this.hasUser=!0}},components:{loginForm:s("VU/8")(k,R,!1,function(e){s("RvUI")},"data-v-695be35e",null).exports,signUpForm:s("VU/8")(P,U,!1,function(e){s("rcCJ")},"data-v-f82a3a7e",null).exports}},$={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-wrap"},[t("p",{staticClass:"test"},[this._v("测试用帐号密码分别为admin,admin")]),this._v(" "),t("div",{staticClass:"login"},[t("h2",[this._v("Vue简历编辑器")]),this._v(" "),this.hasUser?t("div",[t("login-form",[t("input",{attrs:{type:"button",value:"注册"},on:{click:this.signUp}})])],1):t("div",[t("sign-up-form",[t("input",{attrs:{type:"button",value:"取消"},on:{click:this.cancel}})])],1)])])},staticRenderFns:[]};var D=s("VU/8")(x,$,!1,function(e){s("J+MR")},"data-v-9749f432",null).exports,S={name:"TopBar",store:y,methods:p()({logout:function(){c.User.logOut(),this.removeUser(),this.$router.replace("/")},preview:function(){this.$router.replace("/preview")}},Object(C.c)(["removeUser"]),Object(C.b)(["saveResume"])),computed:p()({},Object(C.d)(["user"]))},F={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"top-bar"},[e._m(0),e._v(" "),s("div",{staticClass:"options"},[s("span",{staticClass:"welcome"},[e._v("你好:"+e._s(e.user.username))]),e._v(" "),s("input",{staticClass:"minor",attrs:{type:"button",value:" 登出"},on:{click:e.logout}}),e._v(" "),s("input",{staticClass:"primary",attrs:{type:"button",value:"保存"},on:{click:e.saveResume}}),e._v(" "),s("input",{staticClass:"primary",attrs:{type:"button",value:"预览"},on:{click:e.preview}})])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logo"},[t("span",[this._v("Vue简历编辑器")])])}]};var E=s("VU/8")(S,F,!1,function(e){s("rU4j")},"data-v-a662a0c0",null).exports,j={name:"ResumePreview",store:y,computed:p()({},Object(C.d)(["resume"]))},M={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"resume-preview"}},[s("section",{staticClass:"section-left"},[s("header",{staticClass:"profile"},[s("h2",[e._v(e._s(e.resume.Profile.name))]),e._v(" "),s("h3",[e._v("求职意向:"+e._s(e.resume.Profile.intention))]),e._v(" "),s("p",[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-tel"}})])]),e._v(" "),s("p",[e._v("\n        "+e._s(e.resume.Contacts.telephone)+"\n      ")]),e._v(" "),s("p",[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-email"}})])]),e._v(" "),s("p",[e._v(e._s(e.resume.Contacts.email))]),e._v(" "),s("ul",{staticClass:"personal"},[s("li",[s("p",[e._v("住址")]),e._v(" "),s("p",[e._v(e._s(e.resume.Profile.city))])]),e._v(" "),s("li",[s("p",[e._v("性别")]),e._v(" "),s("p",[e._v(e._s(e.resume.Profile.sex))])]),e._v(" "),s("li",[s("p",[e._v("年龄")]),e._v(" "),s("p",[e._v(e._s(e.resume.Profile.age))])])])]),e._v(" "),s("div",{staticClass:"edu"},[s("h3",[e._v("教育背景")]),e._v(" "),s("p",[e._v(e._s(e.resume.Education.school))]),e._v(" "),s("p",[e._v(e._s(e.resume.Education.time))])]),e._v(" "),s("div",{staticClass:"hobbies"},[s("h3",[e._v("兴趣爱好")]),e._v(" "),s("ul",{staticClass:"hobby-item"},e._l(e.resume.Hobbys,function(t,a){return s("li",{key:a},[e._v(e._s(t.hobby))])}))]),e._v(" "),s("div",{staticClass:"self-assessment"},[s("h3",[e._v("自我评价")]),e._v(" "),s("p",[e._v("\n        "+e._s(e.resume.Profile.assessment)+"\n      ")])])]),e._v(" "),s("section",{staticClass:"section-right"},[s("div",{staticClass:"blog"},[s("h3",[e._v("Github&Blog")]),e._v(" "),s("p",{staticClass:"github"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-github"}})]),e._v(" "),s("span",[e._v("Github:\n          "),s("a",{attrs:{href:e.resume.Contacts.github},domProps:{textContent:e._s(e.resume.Contacts.github)}})])]),e._v(" "),s("p",{staticClass:"blog"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-blog"}})]),e._v(" "),s("span",[e._v("Blog:\n          "),s("a",{attrs:{href:e.resume.Contacts.blog},domProps:{textContent:e._s(e.resume.Contacts.blog)}})])])]),e._v(" "),s("div",{staticClass:"work"},[e._m(0),e._v(" "),e._l(e.resume.Work,function(t,a){return s("div",{key:a,staticClass:"work-item"},[s("ul",[s("li",{staticClass:"item-title"},[s("span",[e._v(e._s(t.company))]),e._v(" "),s("span",[e._v(e._s(t.time))])]),e._v(" "),s("li",{staticClass:"content"},[e._v(e._s(t.details))])])])})],2),e._v(" "),s("div",{staticClass:"project"},[e._m(1),e._v(" "),e._l(e.resume.Projects,function(t,a){return s("div",{key:a,staticClass:"project-item"},[s("ul",[s("li",{staticClass:"item-title"},[s("span",[e._v(e._s(t.project))]),e._v(" "),s("span",[e._v(e._s(t.time))])]),e._v(" "),s("li",{staticClass:"content"},[e._v(e._s(t.details))])])])})],2),e._v(" "),s("div",{staticClass:"skill"},[e._m(2),e._v(" "),e._l(e.resume.Skills,function(t,a){return s("div",{key:a,staticClass:"skill-item"},[s("ul",[s("li",{staticClass:"item-title"},[s("span",[e._v(e._s(t.skill))])]),e._v(" "),s("li",{staticClass:"content"},[e._v(e._s(t.content))])])])})],2)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("h3",[this._v("工作经验")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("h3",[this._v("项目经验")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("h3",[this._v("技能")])])}]};var O=s("VU/8")(j,M,!1,function(e){s("jWp0")},"data-v-d1f642dc",null).exports,W={name:"ResumeEditor",store:y,computed:p()({},Object(C.d)(["resume","resumeConfig"]),{selected:{get:function(){return this.$store.state.selected},set:function(e){return this.$store.commit("switchTab",e)}}}),methods:p()({removeResumeSubField:function(e,t){this.$store.commit("removeResumeSubField",{field:e,index:t})}},Object(C.c)(["addResumeSubField"]),{changeResumePanels:function(e,t){this.$store.commit("updateResume",{path:e,value:t})}})},V={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"resume-editor"}},[s("nav",[s("ol",e._l(e.resumeConfig,function(t,a){return s("li",{key:a,class:{active:t.field===e.selected},on:{click:function(s){e.selected=t.field}}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-"+t.icon}})]),e._v("\n        "+e._s(t.field)+"\n      ")])}))]),e._v(" "),s("ol",{staticClass:"panels"},e._l(e.resumeConfig,function(t,a){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.field===e.selected,expression:"item.field===selected"}],key:a},["array"===t.type?s("div",{staticClass:"array-item"},[e._l(e.resume[t.field],function(a,i){return s("div",{key:i,staticClass:"subitem"},[s("button",{staticClass:"remove-btn",on:{click:function(s){e.removeResumeSubField(t.field,i)}}},[e._v("X")]),e._v(" "),e._l(a,function(a,r){return s("div",{key:r,staticClass:"resumePanels"},[s("label",[e._v(e._s(""+r))]),e._v(" "),s("input",{attrs:{type:"text"},domProps:{value:a},on:{input:function(s){e.changeResumePanels(t.field+"."+i+"."+r,s.target.value)}}})])})],2)}),e._v(" "),s("button",{staticClass:"add-btn",on:{click:function(s){e.addResumeSubField(t.field)}}},[e._v("增加")])],2):e._l(e.resume[t.field],function(a,i){return s("div",{key:i,staticClass:"resumePanels"},[s("label",[e._v(e._s(i))]),e._v(" "),s("input",{attrs:{type:"text"},domProps:{value:a},on:{input:function(s){e.changeResumePanels(t.field+"."+i,s.target.value)}}})])})],2)}))])},staticRenderFns:[]};var I={name:"Main",store:y,components:{TopBar:E,ResumeEditor:s("VU/8")(W,V,!1,function(e){s("Apkt")},"data-v-67f5fea2",null).exports,ResumePreview:O},created:function(){var e=this;this.$store.commit("initState");var t=v();this.$store.commit("setUser",t),t.id?this.$store.dispatch("fetchResume").then(function(){e.restoreResumeFromLocalStorage()}):this.restoreResumeFromLocalStorage()},methods:{restoreResumeFromLocalStorage:function(){var e=localStorage.getItem("resume");e&&this.$store.commit("setResume",JSON.parse(e))}}},N={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"main-page"},[t("header",[t("top-bar")],1),this._v(" "),t("main",[t("resume-editor"),this._v(" "),t("resume-preview")],1)])},staticRenderFns:[]};var A=s("VU/8")(I,N,!1,function(e){s("XWWt")},"data-v-77a077d0",null).exports,H={name:"preview",components:{ResumePreview:O},methods:{goback:function(){this.$router.replace("/main")}}},q={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"preview"},[t("ResumePreview"),this._v(" "),t("div",{staticClass:"goback",on:{click:this.goback}},[this._v("返回")])],1)},staticRenderFns:[]};var J=s("VU/8")(H,q,!1,function(e){s("cwX0")},"data-v-b3c25774",null).exports;a.a.use(n.a);var L=new n.a({routes:[{path:"/",name:"Login",component:D},{path:"/main",name:"Main",component:A},{path:"/preview",name:"Preview",component:J}]});a.a.config.productionTip=!1,new a.a({el:"#app",router:L,template:"<App/>",components:{App:r}})},RvUI:function(e,t){},S8lG:function(e,t){},XWWt:function(e,t){},cwX0:function(e,t){},jWp0:function(e,t){},rU4j:function(e,t){},rcCJ:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.7bc7eca47ba61daaddf3.js.map